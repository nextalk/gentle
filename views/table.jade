- var sort = table.sort()
table.table.table-striped.table-bordered
  thead
    tr
      each column in table.columns()
        if column.permit("display")
          if column.permit("sort")
            th
              if sort.name == column.name
                a(href=url(table,params,{sort:{name: sort.name, asc: !sort.asc}}))
                  if sort.asc
                    span.glyphicon.glyphicon-sort-by-attributes
                  else
                    span.glyphicon.glyphicon-sort-by-attributes-alt
                  |&nbsp;
                  = column.label
              else
                a(href=url(table,params,{sort:column.name}))
                  span.glyphicon.glyphicon-sort
                  |&nbsp;
                  = column.label
          else
            th= column.label
  tbody
    each row in data
      tr
        each column in table.columns()
          if column.permit("display")
            if column.primary
              td
                if table.permit("delete")
                  mixin del(url(table, row))
                a(href=url(table, row))= row[column.name]
            else
              td
                mixin format(column.format(row[column.name], row))


